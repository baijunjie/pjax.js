/*! jquery.pjax v0.9.1 | @author baijunjie */
!function(t,e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):(t.bjj=t.bjj||{},t.bjj.pjax=e(t.jQuery))}(this,function(t){"use strict";function e(e){var i=t.extend({},S,e),r=i.container,o=i.link,a=i.script;if(c(i.active,location.href,i.activeClass),j){r=t.isArray(r)?r:[r],o=t.isArray(o)?o:[o];for(var l=0,f=Math.min(o.length,r.length);f>l;l++)n(r[l],o[l],t.isArray(a)?a[l]:a,i)}}function n(e,n,c,l){var f=l.active,u=l.activeClass,p=l.noCacheClass,d=l.load,h=l.done,v=l.fail,m=l.replace,g=l.complete,x=w++;e=e.split(","),A.pjaxOption[x]={container:e,script:c,active:f,activeClass:u,replaceCallback:m,completeCallback:g};t:for(var y=0,j=e.length;j>y;y++){for(var b=e[y],L=0,O=T.updateList.length;O>L;L++)if(b===T.updateList[L].containerSelector)continue t;var k=t(b);T.updateList.push({id:x,layer:k.parents().length,$content:k.children(),containerSelector:b})}o(T.updateList),n&&t(document).on(C,n,function(n){var o=this.href;if(!s(this.getAttribute("href"))){n.preventDefault();var c=t(this);if(!c.hasClass(p)&&o in A){var l=A[o];if(l.link=this,l===T)return;i(l,e),a(o)}else d.call(this,o),t.ajax({url:o,type:"GET",context:this,beforeSend:function(t){t.setRequestHeader("X-PJAX",!0),t.setRequestHeader("X-PJAX-Container",e)}}).done(function(t){r(t,o);var n=A[o];n.link=this,i(n,e),a(o),h.call(this,o,t)}).fail(function(){v.call(this,o)})}})}function i(e,n){for(var i=e.updateList.length,r=t();i--;){var o=e.updateList[i],a=o.containerSelector;if(!(t.isArray(n)&&t.inArray(a,n)<0)){var l=t(a),f=o.$content;if(f.length&&l.length&&f.html()!==l.children().html()){var s=o.id,u=A.pjaxOption[s];u.replaceCallback.call(e.link,l),l.children().detach(),l.stop().hide().append(f).fadeIn(),u.completeCallback.call(e.link,l),r=r.add(l)}}}for(y(r),e.title&&(document.title=e.title),i=A.pjaxOption.length;i--;){var u=A.pjaxOption[i];if(!n||n===u.container){c(u.active,e.href,u.activeClass);var p=e.script&&e.script[i];p&&(k.append(p),e.script[s]=void 0)}}T=e}function r(e,n){var i=t.trim(e),r=t.parseHTML(i,null,!0),a=t(r),c=t("<div>").append(a),l=A.pjaxOption,s={},u=[],p=[],d=[],h=[],v=[];a=a.filter(":not(script)");for(var g=0,x=l.length;x>g;g++){var y=l[g];y.script&&h.push(c.find(y.script));for(var j=0,C=y.container.length;C>j;j++){var b=y.container[j];u.push(g),p.push(t(b).parents().length),v.push(b);var L=c.find(b+" >");L.length?m(L,n):L=t(b+" >"),d.push(L)}}for(var O=[],k=p.length;k--;)O.push({id:u[k],layer:p[k],$content:d[k],containerSelector:v[k]});o(O),s.updateList=O,s.href=n,s.title=a.filter("title").text(),s.script=h,f(A,n,s)}function o(t){t.sort(function(t,e){return-(t.layer-e.layer)})}function a(t){g(),history.pushState(t,null,t)}function c(e,n,i){var r=t(e),o=l(r,n);o&&(r.removeClass(i),o.addClass(i))}function l(e,n){var i=d(n),r=null;return e.each(function(e,n){s(n.getAttribute("href"))||d(n.href)!==i||(r=r?r.add(n):t(n))}),r}function f(t,e,n){var i=d(e);for(var r in t)if(d(r)===i){delete t[r];break}t[e]=n}function s(t){return!t||0===t.indexOf("#")||0===t.indexOf("javascript:")}function u(t){return t&&(0===t.indexOf("http")||0===t.indexOf("file:"))}function p(){return location.protocol+"//"+location.host}function d(t){return t?t.replace(/[#?].*$/,""):location.protocol+"//"+location.host+location.pathname}function h(t){return t.replace(/[^\/]*$/,"")}function v(t,e){if(e.indexOf("../"))e.indexOf("./")?e.indexOf("/")||(t=p()):e=e.replace("./","");else{var n=0;if(e=e.replace("../",function(){return n=1,t=t.replace(/[^\/]*\/?$/,""),""}),n)return v(t,e)}return t+e}function m(t,e){var n=t.filter("[href],[src]").add(t.find("[href],[src]")),i=h(e);n.each(function(t,e){var n=e.getAttribute("href"),r=e.getAttribute("src");s(n)||u(n)||(e.href=v(i,n)),s(r)||u(r)||(e.src=v(i,r))})}function g(){x(b,!0)}function x(t,e){var n=t.scrollTop;if(t.scrollTop+=n>0?-1:1,t.scrollTop!=n)return t.scrollTop=n,!0;if(e){var i=t.scrollLeft;return t.scrollLeft+=i>0?-1:1,t.scrollLeft!=i?(t.scrollLeft=i,!0):void 0}}function y(t){if(t.length){var e,n,i=O.width()/2,r=O.height()/2,o=O.scrollLeft(),a=O.scrollTop();t.each(function(){var t=this.getBoundingClientRect();(void 0===e||e>t.left)&&(e=t.left),(void 0===n||n>t.top)&&(n=t.top)}),(e>i||0>e)&&(o+=e),(n>r||0>n)&&(a+=n),L.stop().animate({scrollLeft:o,scrollTop:a})}}var j=!!window.history.pushState;if(j){m(t(document.documentElement),location.href);var C=navigator.userAgent.match(/mobile/i)?"touchend":"click",b=x(document.documentElement)?document.documentElement:document.body,L=t(b),O=t(window),k=t(document.body),A={},w=0,T={href:location.href,title:document.title,updateList:[]};A.pjaxOption=[],f(A,location.href,T),history.replaceState(location.href,null,location.href),window.addEventListener("popstate",function(t){var e=t.state;e&&e in A&&i(A[e]),window.setTimeout(g,0)},!1)}var S={container:"",link:"a",script:"",active:"",activeClass:"active",noCacheClass:"nocache",load:function(){},done:function(){},fail:function(){},replace:function(){},complete:function(){}};return e});